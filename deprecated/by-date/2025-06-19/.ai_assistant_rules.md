# üö® MANDATORY AI ASSISTANT RULES
*These rules MUST be followed by all AI assistants working on this project*

## üî¥ **CRITICAL: READ THIS FIRST**

**Before suggesting ANY code changes or new development:**

```bash
# MANDATORY: Run this command FIRST
python3 scripts/production/check_existing_systems.py "what you want to build"
```

**üö® VIOLATION ALERT**: If you suggest building something without running this search first, you are violating project standards.

## üéØ **RULE 0: ORCHESTRATOR-FIRST (CRITICAL)**

**For ANY experiment, statistical analysis, or data work:**

```bash
# ‚úÖ ALWAYS use the production orchestrator for experiment work
python3 scripts/production/comprehensive_experiment_orchestrator.py experiment.json

# ‚úÖ Resume interrupted experiments (transaction-safe)
python3 scripts/production/comprehensive_experiment_orchestrator.py --resume
```

### **‚ùå NEVER suggest custom scripts for:**
- Statistical analysis (built into orchestrator)
- Data extraction (built into orchestrator)
- Hypothesis testing (built into orchestrator)
- Report generation (built into orchestrator)
- Visualization (built into orchestrator)
- Experiment execution (orchestrator handles this)

### **‚úÖ The orchestrator includes:**
- Complete statistical analysis pipeline
- Architectural compliance validation
- Academic export systems (CSV, R, Stata, JSON)
- Comprehensive visualization generation
- Hypothesis tracking and validation
- Transaction-safe execution with checkpoint/resume
- Cost controls and error handling
- Multi-LLM support with automatic registration

**üö® AI ASSISTANTS**: The orchestrator treats experiments as atomic transactions. Don't suggest bypassing it with custom scripts!

---

## üìã **MANDATORY WORKFLOW**

### **Rule 1: ALWAYS Search Production Code First**
```bash
# ‚úÖ CORRECT: Search production systems first
python3 scripts/production/check_existing_systems.py "functionality description"

# ‚ùå WRONG: Using generic codebase_search without production focus
# ‚ùå WRONG: Building without searching first
```

### **Rule 2: NEVER Use Deprecated Code**
- ‚ùå **NEVER** reference code in `deprecated/` directory
- ‚ùå **NEVER** suggest using "AI Academic Advisor" (it's inferior file-checking)
- ‚úÖ **ALWAYS** use `LLMQualityAssuranceSystem` (production 6-layer validation)

### **Rule 3: Build in Experimental First**
```bash
# ‚úÖ CORRECT: New development goes here
mkdir experimental/prototypes/your_new_system/

# ‚ùå WRONG: Building directly in src/ or scripts/
```

### **Rule 4: Enhance Don't Replace**
- ‚úÖ **FIRST**: Try to enhance existing production systems
- ‚ùå **AVOID**: Building new systems that duplicate existing functionality

---

## üîç **PRODUCTION SYSTEMS TO USE**

### **‚úÖ Quality Assurance (USE THESE)**
- `src/narrative_gravity/utils/llm_quality_assurance.py` - 6-layer mathematical validation
- `src/narrative_gravity/development/quality_assurance.py` - Component validation

### **‚úÖ Experiment Execution (USE THESE)**  
- `scripts/production/execute_experiment_definition.py` - YAML-driven experiments
- `scripts/production/comprehensive_experiment_orchestrator.py` - Multi-phase orchestration

### **‚úÖ Data Export (USE THESE)**
- `src/narrative_gravity/academic/data_export.py` - QA-enhanced academic export
- `src/narrative_gravity/cli/academic_analysis_pipeline.py` - Complete workflow

### **‚ùå DEPRECATED SYSTEMS (NEVER USE)**
- `deprecated/by-system/architectural_compliance_validator.py` - Inferior file-checking
- Any code marked with `# DEPRECATED`
- Any code in `archive/` folders

---

## üö® **VIOLATION DETECTION**

If an AI assistant suggests:
- Building new QA systems ‚Üí **VIOLATION** (use existing LLMQualityAssuranceSystem)
- Using "AI Academic Advisor" ‚Üí **VIOLATION** (it's just file existence checks)
- Putting new code in `src/` without experimental testing ‚Üí **VIOLATION**
- Referencing deprecated code ‚Üí **VIOLATION**

---

## üìö **REQUIRED READING**

1. `docs/EXISTING_SYSTEMS_INVENTORY.md` - What already exists
2. `docs/CODE_ORGANIZATION_STANDARDS.md` - Where things belong
3. `README.md` - Production-first development workflow

---

## üéØ **SUCCESS CRITERIA**

An AI assistant is following the rules if:
- ‚úÖ Runs production search before suggesting new development
- ‚úÖ References existing production systems when available
- ‚úÖ Suggests enhancements over rebuilding
- ‚úÖ Puts new development in experimental/ first
- ‚úÖ Never references deprecated code

**üõ°Ô∏è Remember: These rules exist because this project has repeatedly wasted time rebuilding inferior versions of existing sophisticated systems. Following these rules prevents that waste.** 