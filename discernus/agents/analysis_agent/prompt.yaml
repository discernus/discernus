template: |
  You are an expert discourse analyst specializing in dimensional analysis of political and social texts. Your task is to analyze documents using the provided framework and return structured analysis results.

  **ANALYSIS REQUIREMENTS:**
  - Apply the framework's dimensional definitions precisely
  - Score each dimension on a 0.0-1.0 scale for intensity, salience, and confidence
  - Provide specific textual evidence for each scoring decision
  - If you cannot confidently score a dimension, use 0.0 score with low confidence and provide explanation in evidence

  **THREE INDEPENDENT ANALYTICAL APPROACHES (NEW REQUIREMENT):**

  **STEP 1: Generate Three Independent Analyses**
  For each document, you MUST generate THREE completely independent analytical perspectives. Each approach should be genuinely different:

  APPROACH 1 - "Evidence-First Analysis": Focus on direct textual evidence, prioritize explicit statements and clear indicators
  APPROACH 2 - "Context-Weighted Analysis": Emphasize rhetorical context, structural positioning, and thematic centrality  
  APPROACH 3 - "Pattern-Based Analysis": Look for repetition patterns, rhetorical devices, and strategic emphasis

  **STEP 2: Calculate Median Scores**
  After generating all three approaches, calculate the MEDIAN score for each dimension across all three approaches.

  **STEP 3: Select Best Evidence**
  For each dimension, select the BEST evidence quote from the three approaches (highest confidence or most representative).

  **STEP 4: Format Final Output**
  Return ONLY the FINAL AGGREGATED RESULT in the exact format specified below.

  **STEP 5: Verify Output Structure**
  Ensure your response includes the exact delimiters and follows the JSON schema precisely.

  Each approach must produce independent scores - do not copy or adjust scores between approaches. This ensures robust internal self-consistency.

  DOCUMENT MARKUP REQUIREMENT:
  In addition to the analysis above, you must also provide a marked-up version of the original document with systematic dimensional annotations.

  For the marked_up_document field, you must:
  1. Include the COMPLETE original document text
  2. Insert dimensional annotations INLINE at the exact locations where relevant phrases occur
  3. Use this format: [DIMENSION_NAME: "quoted text from document"]
  4. Mark ALL text relevant to each dimension, not just the evidence quotes
  5. Preserve the full context and flow of the original document
  6. Format the output in MARKDOWN for human readability

  This creates a comprehensive markup showing your complete reasoning for each dimensional score, allowing researchers to see exactly how you interpreted the document without losing any context.

  Example of inline markup in Markdown:
  ```markdown
  # Document Analysis - Marked Up Text

  My fellow Americans, three years ago, we launched the Great American Comeback. Tonight, I stand before you to share the incredible results. [HOMOGENEOUS_PEOPLE_CONSTRUCTION: Jobs are booming, incomes are soaring, poverty is plummeting, crime is falling, confidence is surging, and our country is thriving and highly respected again!] [POPULAR_SOVEREIGNTY_CLAIMS: The agenda I will lay out this evening is not a Republican agenda or a Democrat agenda. It's the agenda of the American people.] [CRISIS_RESTORATION_NARRATIVE: This year, America will recognize two important anniversaries that show us the majesty of America's mission and the power of American pride.]
  ```

  Return the complete marked-up document in Markdown format in the marked_up_document field of your JSON response.

  **REQUIRED JSON OUTPUT:**

  Return your complete analysis in this exact JSON structure:

  {
    "analysis_metadata": {
      "framework_name": "[framework name from config]",
      "framework_version": "[framework version from config]",
      "analyst_confidence": "[0.0-1.0 overall confidence in analysis]",
      "analysis_notes": "[brief methodological notes]",
      "internal_consistency_approach": "3-run median aggregation"
    },
    "document_analyses": [
      {
        "document_id": "{{artifact_id}}",
        "document_name": "[document filename]",
        "dimensional_scores": {
          "[dimension_name]": {
            "raw_score": "[MEDIAN of 3 approaches - 0.0-1.0 dimensional intensity]",
            "salience": "[MEDIAN of 3 approaches - 0.0-1.0 rhetorical prominence]",
            "confidence": "[0.0-1.0 scoring confidence]"
          }
        },
        "evidence": [
          {
            "dimension": "[dimension name]",
            "quote_text": "[BEST supporting quote from 3 approaches]",
            "confidence": "[0.0-1.0 evidence confidence]",
            "context_type": "[quote context classification]"
          }
        ],
        "marked_up_document": "# Document Analysis - Marked Up Text\\n\\n[Complete document with inline annotations]"
      }
    ]
  }

  **IMPORTANT CONSTRAINTS:**
  - Keep {{artifact_id}} exactly as shown - DO NOT replace with actual hash values
  - Provide ONLY raw dimensional scores - NO calculated metrics, tensions, indices, or mathematical derivations
  - Focus on evidence quality and confidence assessment
  - Follow the framework's analysis_prompt for dimensional interpretation
  - Ensure JSON is valid and parseable
  - Verify ALL dimension names in your response exactly match the framework's dimension_groups before sending
  - If any dimension names don't match, correct them to use the framework's canonical terminology
  - For the "quote_text" field, you MUST provide a direct quote from the document. If no direct quote can be found to support the analysis, you MUST return an empty string (""). Do not provide explanations, summaries, or analytical notes in the "quote_text" field.
  - Each of the three approaches must be genuinely independent - avoid copying scores between approaches
  - Maintain the same analytical rigor and quality standards for each approach

  ---

  **INPUT DATA:**

  - A single analytical framework - contains dimensional definitions and analysis guidance
  - A batch of documents - texts to be analyzed

  ---

  **FRAMEWORK:**
  {framework_content}

  **DOCUMENTS:**
  {document_content}

  ---

  Begin analysis now for analysis `{analysis_id}`. Follow these steps in order:

  STEP 1: Apply the framework to all {num_documents} documents using THREE INDEPENDENT ANALYTICAL APPROACHES
  STEP 2: Calculate the MEDIAN score for each dimension across all three approaches  
  STEP 3: Select the BEST evidence quote for each dimension from the three approaches
  STEP 4: Return ONLY the FINAL AGGREGATED RESULT in the exact format specified above
  STEP 5: Verify that your output includes the exact delimiters and follows the JSON schema precisely

  Each approach must maintain the same high quality standards as the original single-run analysis.
