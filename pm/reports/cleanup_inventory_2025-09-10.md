# CLEANUP-001: Dead Code and Deprecated Dependencies Inventory (2025-09-10)

This document inventories dead code, deprecated modules, legacy files, and dependency risks in preparation for Sprint 13 cleanup tasks.

## Summary (Alpha-Relevant Findings)
- Code marked as deprecated remains in-tree under `discernus/core/deprecated/` and `discernus/agents/deprecated/`.
- Legacy/alternate CLI files present: `discernus/cli.py.backup`, `discernus/cli_clean.py`, `discernus/cli_console.py`.
- Deprecated agents targeted for removal in Sprint 13 are still present and referenced by tests and docs:
  - `discernus/agents/fact_checker_agent/`
  - `discernus/agents/revision_agent/`
- No Redis or MinIO dependencies detected in current dependency manifests (good).
- Dual dependency manifests exist (`requirements.txt` and `pyproject.toml`) with overlap and drift risk.

## Detailed Inventory

### 1) Explicitly Deprecated Directories
- `discernus/core/deprecated/`
  - Files include: `thin_orchestrator.py`, `v8_orchestrator.py`, `cli_v8.py`, notebook executors/templates, assemblers, etc.
  - Status: Legacy; safe candidates for removal or archival tag.
- `discernus/agents/deprecated/`
  - Multiple older agents (e.g., sequential_synthesis/thin_synthesis trees) under `agents/deprecated/`.
  - Status: Legacy; safe candidates for removal or archival tag.

### 2) Legacy/Alternate CLI Files
- `discernus/cli.py.backup`
- `discernus/cli_clean.py`
- `discernus/cli_console.py`
- Status: Likely dead. Confirm no invocations in docs/Makefiles/CI (none detected). Candidates for removal.

### 3) Agents Targeted for Removal (Sprint 13)
- `discernus/agents/fact_checker_agent/`
- `discernus/agents/revision_agent/`
- Code references remain:
  - In orchestrator (commented import for `RevisionAgent`, dynamic imports for `FactCheckerAgent`).
  - Tests: multiple files import these agents (integration and unit).
  - Docs: architectural docs reference both agents.
- Action when removing:
  - Delete agent packages.
  - Remove dynamic imports/paths from `CleanAnalysisOrchestrator` and any helpers.
  - Update or remove tests that reference these agents.
  - Update docs to remove or annotate historical references.

### 4) Tests Referencing Deprecated Agents (non-exhaustive)
- `discernus/tests/integration/test_revision_agent.py`
- `discernus/tests/integration/test_hybrid_end_to_end.py`
- `discernus/tests/integration/test_hybrid_fact_checker.py`
- `discernus/tests/integration/test_index_validation.py`
- `discernus/tests/test_orchestrator_fact_checker_integration.py`
- `discernus/tests/test_fact_checker_*`
- Status: Must be removed or refactored once agents are removed.

### 5) Documentation Referencing Deprecated Agents
- `docs/architecture/DISCERNUS_SYSTEM_ARCHITECTURE.md` (references `revision_agent` and `fact_checker_agent` locations)
- `docs/architecture/typesense_bm25_pipeline_documentation.md`
- Status: Update to reflect current architecture post-removal.

### 6) Dependency Manifests
- `requirements.txt` exists and includes: pandas/numpy/scipy, txtai, typesense, etc.
- `pyproject.toml` [project.dependencies] includes overlapping but not identical lists (e.g., `loguru`, `pingouin`, `statsmodels` appear only here; versions differ slightly from requirements).
- `scripts/prompt_engineering/requirements.txt` present; confirm whether still used.
- No `redis` or `minio` strings found in code or dependency files.
- Risk: Drift between `requirements.txt` and `pyproject.toml`.
  - Resolution options: single source of truth (prefer `pyproject.toml`), generate `requirements-lock.txt` for reproducible envs later.

## Proposed Actions (mapped to Sprint 13)

### CLEANUP-001 (this inventory)
- Done: Initial inventory completed (this document).

### CLEANUP-002: Remove Deprecated Agents
- Remove `fact_checker_agent` and `revision_agent` code.
- Excise imports/dynamic references from orchestrator and helpers.
- Delete/skip tests referencing removed agents.
- Update docs.

### CLEANUP-003: Dead Dependencies and Architecture Updates
- Remove legacy/alternate CLI files (`cli.py.backup`, `cli_clean.py`, `cli_console.py`).
- Remove `discernus/core/deprecated/` and `discernus/agents/deprecated/` (or move to `zarchive/` if historical preservation required).
- Consolidate dependency manifests: pick `pyproject.toml` as source; align `requirements.txt` or generate from it.
- Update `DISCERNUS_SYSTEM_ARCHITECTURE.md` to reflect current 3-stage pipeline and removal of deprecated components.

## Notes
- No blocking third-party deprecations detected.
- Library `txtai` and `typesense` are present by design for RAG; OK for alpha.
- LLM provider libs (Anthropic, Google) present as intended.

---
Generated by Sprint 13 CLEANUP-001 on 2025-09-10.
