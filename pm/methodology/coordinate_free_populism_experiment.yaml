# Coordinate-Free Populism Analysis: Ensemble Prototype Experiment
# Advances sim3 methodology with quantitative scoring for validation
# Implements Thick LLM + Thin Software = Epistemic Trust vision
#
# METHODOLOGICAL ADVANCEMENT: This experiment combines the proven multi-stage
# coordinate-free analysis from sim3 with quantitative scoring for empirical
# validation against expert assessments. Each stage builds systematically
# toward a final quantitative populism score on Eduardo's 0.0-1.0 scale.
#
# EPISTEMIC TRUST: This experiment definition specifies the analytical methodology.
# Execution strategy (ensemble models, orchestration) is specified separately in
# orchestration configuration files for clean separation of concerns.
#
# SCHEMA COMPLIANCE: This experiment follows the Coordinate-Free Experiment
# Schema Specification v1.0, ensuring compatibility with automated prompt
# extraction and orchestration systems.
#
# Version: 1.0-prototype
# Date: 2025-07-03
# Status: Ready for coordinate-free ensemble prototype testing

# ================================================================
# EXPERIMENT IDENTIFICATION
# ================================================================

experiment_name: coordinate_free_populism_ensemble_prototype
version: v1.0-prototype
display_name: "Coordinate-Free Populism Analysis: Ensemble Prototype with Quantitative Scoring"

description: |
  This experiment validates coordinate-free discourse analysis methodology through
  systematic multi-stage analysis with quantitative scoring for empirical validation.
  
  This experiment definition specifies WHAT analytical methodology to execute:
  the multi-stage coordinate-free analysis progression from discovery through
  quantitative scoring. HOW it gets executed (which models, ensemble strategy,
  orchestration details) is specified separately in orchestration configuration.
  
  DESIGN RATIONALE:
  - Addresses sim3's critical defect: missing quantitative scoring capability
  - Implements coordinate-free schema specification for systematic orchestration
  - Enables ensemble consensus evaluation while preserving individual LLM audit trails
  - Provides empirical validation pathway through expert score comparison
  - Demonstrates "Thick LLM + Thin Software = Epistemic Trust" architecture
  - Separates analytical methodology from execution strategy for clean architecture

# ================================================================
# RESEARCH QUESTIONS & HYPOTHESES
# ================================================================

research_questions:
  primary: "Can coordinate-free ensemble analysis accurately predict expert populism scores while providing superior analytical transparency?"
  
  secondary:
    - "Does multi-stage coordinate-free analysis improve score prediction accuracy?"
    - "Do ensemble LLM results show meaningful consensus vs disagreement patterns?"
    - "Does systematic stage documentation enable epistemic trust verification?"
    - "Can framework fit assessment predict when analysis is most reliable?"

# RESEARCH DESIGN RATIONALE:
# These questions directly test the epistemic trust vision by combining:
# 1. Empirical validation (accuracy against expert scores)
# 2. Transparency verification (stage documentation and consensus tracking)
# 3. Methodological improvement (multi-stage vs single-stage approaches)
# 4. Reliability prediction (framework fit as confidence indicator)

# ================================================================
# FRAMEWORK INTEGRATION
# ================================================================

framework_integration:
  framework_source: "populism_pluralism_coordinate_free_v1.0.yaml"
  
  # FRAMEWORK INTEGRATION RATIONALE:
  # This section implements the coordinate-free schema specification requirements
  # for analytical methodology. Execution details (ensemble models, orchestration)
  # are handled separately in orchestration configuration for clean separation.
  
  analysis_protocol:
    # LLM Configuration (Methodology Requirements)
    llm_model: "LLM"  # Placeholder - actual model specified in orchestration config
    prompt_strategy: "Sequential multi-stage coordinate-free analysis with quantitative scoring"
    
    # ANALYTICAL METHODOLOGY FOCUS:
    # This protocol specifies the analytical methodology (stages, prompts, variables)
    # without specifying execution details. The orchestration system will execute
    # this methodology using the ensemble configuration specified separately.
    
    # Ensemble Requirements (Analytical, not Operational)
    ensemble_requirements:
      analytical_independence: "Each LLM must execute full stage sequence independently"
      consensus_evaluation: "Results aggregated with disagreement documentation"
      minority_reporting: "Significant disagreement preserved rather than averaged"
      stage_transparency: "All stage results stored for complete audit trail"
      
    # ENSEMBLE REQUIREMENTS RATIONALE:
    # These specify analytical requirements for ensemble execution without
    # dictating specific models or operational parameters. This enables the
    # same analytical methodology to be executed with different ensemble
    # configurations (dev vs prod models, different consensus strategies, etc.)
    
    # ================================================================
    # STAGE 1: DISCOVERY ANALYSIS
    # ================================================================
    
    stage_1_discovery:
      description: "Open-ended thematic analysis without framework bias"
      
      # STAGE 1 DESIGN RATIONALE:
      # Discovery-first approach prevents framework tunnel vision by identifying
      # themes before applying analytical categories. This implements coordinate-free
      # methodology by letting patterns emerge from data rather than imposing
      # predetermined structures. Results feed into subsequent stages via variable
      # substitution {discovery_results}.
      
      contextual_guidance: |
        You are analyzing Brazilian political discourse from the 2018 presidential
        campaign. Approach this text without preconceived categories or frameworks.
        Focus on identifying themes, rhetorical strategies, and values as they
        appear in the text itself.
        
        CONTEXTUAL GUIDANCE RATIONALE:
        - Brazilian 2018 context provides domain specificity without analytical bias
        - "Without preconceived categories" enforces coordinate-free methodology
        - Focus on emergent patterns implements discovery-first approach
        
      prompt: |
        You are an expert discourse analyst specializing in Brazilian political communication.
        
        Your task is to analyze this political speech text without using predefined 
        analytical categories. Approach it with fresh eyes to identify the themes,
        strategies, and values that emerge from the text itself.
        
        SPEECH TEXT:
        {speech_text}
        
        # VARIABLE DESIGN RATIONALE:
        # {speech_text} is the primary text input variable following schema
        # specification conventions. This variable will be populated by the
        # orchestrator with actual speech content from the corpus.
        
        DISCOVERY ANALYSIS QUESTIONS:
        
        1. MAIN THEMES: What are the 3-5 most prominent themes in this speech?
        
        2. RHETORICAL APPROACH: How does this speech approach political communication?
           What style, tone, and rhetorical strategies are used?
        
        3. VALUES EMPHASIZED: What values, principles, or priorities are most 
           strongly emphasized?
        
        4. AUDIENCE RELATIONSHIP: How does the speaker position themselves relative
           to their audience? What kind of relationship is established?
        
        5. OPPOSITION FRAMING: How are political opponents or alternative viewpoints
           characterized, if at all?
        
        # QUESTION DESIGN RATIONALE:
        # Five dimensions capture comprehensive thematic landscape:
        # - Themes: Content analysis foundation
        # - Rhetorical approach: Strategic communication patterns
        # - Values: Normative framework identification
        # - Audience relationship: Democratic engagement style
        # - Opposition framing: Conflict/consensus orientation
        # 
        # This structure provides rich input for subsequent framework analysis
        # while maintaining coordinate-free discovery approach.
        
        REQUIRED OUTPUT FORMAT:
        - Number your responses 1-5
        - Support each point with specific evidence using [EVIDENCE: "exact quote"]
        - Be specific and avoid generic political language
        - Focus on what makes this speech distinctive
        
        # OUTPUT FORMAT RATIONALE:
        # Numbered responses enable systematic variable substitution in later stages.
        # Evidence requirements enforce textual grounding and prevent hallucination.
        # Specificity requirements prevent generic analysis and enhance distinctiveness.
        # Distinctiveness focus enables comparative analysis across corpus texts.
        
      output_validation:
        - "Themes are specific and grounded in textual evidence"
        - "Rhetorical approach is clearly characterized with examples"
        - "Values are explicitly identified with supporting quotes"
        - "Analysis avoids predetermined political categories"
        
      # VALIDATION RATIONALE:
      # These criteria ensure discovery stage achieves its coordinate-free goals:
      # - Textual grounding prevents analytical drift
      # - Clear characterization enables stage variable substitution
      # - Explicit identification provides systematic input for framework stages
      # - Category avoidance maintains coordinate-free methodology integrity

    # ================================================================
    # STAGE 2: ANCHOR ASSESSMENT
    # ================================================================
    
    stage_2_anchor_assessment:
      description: "Independent assessment of populism and pluralism themes"
      
      # STAGE 2 DESIGN RATIONALE:
      # Multi-prompt stage structure enables independent anchor evaluation while
      # sharing discovery context. This implements coordinate-free principle of
      # systematic anchor assessment informed by but not constrained by discovery
      # results. Quantitative scoring addresses sim3's critical validation defect.
      
      contextual_guidance: |
        Now assess this speech for specific theoretical constructs. Evaluate
        populism and pluralism themes independently, using systematic criteria
        but informed by your discovery analysis context.
        
        CONTEXTUAL GUIDANCE RATIONALE:
        - "Now assess" creates clear stage transition from discovery to framework
        - "Independently" prevents cross-contamination between anchor assessments
        - "Informed by discovery" implements variable dependency relationship
        - "Systematic criteria" ensures consistent evaluation methodology
        
      populism_prompt: |
        🚨 CRITICAL FORMAT REQUIREMENT 🚨
        You MUST respond using ONLY the exact structured format specified below.
        DO NOT include conversational text, explanations, or JSON format.
        Your response will be automatically parsed - format violations will cause system failure.
        
        You are a political communication expert analyzing this speech for populist themes.
        
        Use the structured discovery approach: provide essential structure for processing
        while documenting rich analytical insights and edge cases.
        
        SPEECH TEXT:
        {speech_text}
        
        DISCOVERY CONTEXT: {discovery_results}
        
        MANDATORY OUTPUT STRUCTURE - FOLLOW EXACTLY:
        
        [PRESENCE]: Yes/No/Unclear
        [CONFIDENCE]: High/Medium/Low
        [SCORE]: 0.XX
        [CORE_EVIDENCE]: "key supporting quote"
        [DETAILED_ANALYSIS]: Comprehensive populism analysis including nuanced assessment of populist themes and their manifestation, Brazilian cultural context and its impact on populist expression, specific rhetorical strategies and their effectiveness, comparison with typical populist patterns, theoretical implications for populism research
        [EDGE_CASES]: Document any unusual populist patterns or contradictions - populist themes that don't fit standard definitions, Brazilian-specific populist expressions, contradictory evidence or mixed signals, innovative rhetorical strategies
        [MINORITY_REPORT]: If alternative interpretations exist document them - While my primary analysis suggests X, an alternative interpretation is Y because evidence. This matters because implications.
        [THEORETICAL_IMPLICATIONS]: What this analysis suggests about populism theory and its application to Brazilian politics, variations in populist expression across cultures, limitations of current populism frameworks, new insights for populism research
        
        ✅ CORRECT FORMAT EXAMPLE:
        [PRESENCE]: Yes
        [CONFIDENCE]: High
        [SCORE]: 0.75
        [CORE_EVIDENCE]: "we must take our country back from the corrupt elites"
        [DETAILED_ANALYSIS]: This speech demonstrates strong populist themes...
        
        ❌ INCORRECT FORMAT (DO NOT DO THIS):
        "I would say that this speech shows some populist elements..."
        ```json{"populism_score": 0.75}```
        
        🎯 QUANTITATIVE SCORE REQUIREMENTS:
        - MUST be a decimal number between 0.0 and 1.0
        - Use format: [SCORE]: 0.XX (not "about 0.7" or "roughly 75%")
        
        ⚠️ FINAL WARNING ⚠️
        Your response will be processed by automated systems.
        Any text outside the [FIELD]: value format will cause parsing failure.
        Provide ONLY the structured fields requested above.
           
      pluralism_prompt: |
        🚨 CRITICAL FORMAT REQUIREMENT 🚨
        You MUST respond using ONLY the exact structured format specified below.
        DO NOT include conversational text, explanations, or JSON format.
        Your response will be automatically parsed - format violations will cause system failure.
        
        You are a political communication expert analyzing this speech for pluralist themes.
        
        Apply the structured discovery approach, balancing processing requirements
        with analytical freedom to capture the full complexity of pluralist patterns.
        
        SPEECH TEXT:
        {speech_text}
        
        DISCOVERY CONTEXT: {discovery_results}
        
        MANDATORY OUTPUT STRUCTURE - FOLLOW EXACTLY:
        
        [PRESENCE]: Yes/No/Unclear
        [CONFIDENCE]: High/Medium/Low  
        [SCORE]: 0.XX
        [CORE_EVIDENCE]: "key supporting quote"
        [DETAILED_ANALYSIS]: Comprehensive pluralism analysis including nuanced assessment of pluralist democratic themes, Brazilian democratic context and institutional references, specific inclusive or deliberative rhetorical strategies, relationship to pluralist democratic theory, cross-cultural considerations for pluralism expression
        [EDGE_CASES]: Document unusual pluralist patterns - pluralist themes that don't fit standard definitions, Brazilian-specific democratic discourse patterns, contradictory or mixed democratic signals, innovative approaches to inclusive communication
        [MINORITY_REPORT]: Alternative interpretations of pluralist themes - document dissenting views on pluralism assessment, include uncertainty about score assignment, acknowledge multiple valid interpretations
        [THEORETICAL_IMPLICATIONS]: Insights for pluralism and democratic theory - variations in pluralist expression across cultures, limitations of current pluralism frameworks, new approaches to analyzing democratic discourse
        
        ✅ CORRECT FORMAT EXAMPLE:
        [PRESENCE]: Unclear
        [CONFIDENCE]: Medium
        [SCORE]: 0.25
        [CORE_EVIDENCE]: "we respect democratic institutions"
        [DETAILED_ANALYSIS]: The speech contains limited pluralist elements...
        
        ❌ INCORRECT FORMAT (DO NOT DO THIS):
        "Looking at the evidence, I think the pluralism score should be..."
        ```json{"pluralism_score": 0.25}```
        
        🎯 QUANTITATIVE SCORE REQUIREMENTS:
        - MUST be a decimal number between 0.0 and 1.0
        - Use format: [SCORE]: 0.XX (not "about 0.3" or "roughly 25%")
        
        ⚠️ FINAL WARNING ⚠️
        Your response will be processed by automated systems.
        Any text outside the [FIELD]: value format will cause parsing failure.
        Provide ONLY the structured fields requested above.

    # ================================================================
    # STAGE 3: COMPETITIVE ANALYSIS  
    # ================================================================
    
    stage_3_competitive_analysis:
      description: "Analysis of populism-pluralism interaction and strategic coherence"
      
      # STAGE 3 DESIGN RATIONALE:
      # Integration stage combines anchor assessments to understand strategic
      # coherence and thematic relationships. Score reconciliation enables
      # adjustment based on competitive dynamics, implementing sophisticated
      # analytical reasoning that considers interaction effects. This goes beyond
      # simple anchor scoring to strategic pattern recognition.
      
      prompt: |
        🚨 CRITICAL FORMAT REQUIREMENT 🚨
        You MUST respond using ONLY the exact structured format specified below.
        DO NOT include conversational text, explanations, or JSON format.
        Your response will be automatically parsed - format violations will cause system failure.
        
        You are a strategic communication analyst specializing in democratic discourse patterns.
        
        Analyze how populist and pluralist themes interact in this speech, drawing on
        your systematic assessments to understand the overall rhetorical strategy.
        
        POPULISM ASSESSMENT: {populism_results}
        
        PLURALISM ASSESSMENT: {pluralism_results}
        
        MANDATORY OUTPUT STRUCTURE - FOLLOW EXACTLY:
        
        [THEMATIC OPPOSITION]: Direct conflicts with supporting examples
        [COEXISTENCE AREAS]: Complementary areas with explanation
        [DOMINANCE PATTERNS]: Dominant themes and contextual variations
        [COHERENCY PATTERN]: Selected pattern with detailed justification
        [STRATEGIC ASSESSMENT]: Primary strategy with supporting analysis
        [FINAL POPULISM SCORE]: 0.XX
        [FINAL PLURALISM SCORE]: 0.XX
        [ADJUSTMENT JUSTIFICATION]: Explain any score modifications
        
        ✅ CORRECT FORMAT EXAMPLE:
        [THEMATIC OPPOSITION]: Populism dominates with anti-pluralist sentiment evident
        [FINAL POPULISM SCORE]: 0.75
        [FINAL PLURALISM SCORE]: 0.25
        
        ❌ INCORRECT FORMAT (DO NOT DO THIS):
        "Looking at the competitive dynamics, I would say..."
        ```json{"final_populism_score": 0.75}```
        
        🎯 QUANTITATIVE SCORE REQUIREMENTS:
        - MUST be decimal numbers between 0.0 and 1.0
        - Use format: [FINAL POPULISM SCORE]: 0.XX
        
        ⚠️ FINAL WARNING ⚠️
        Your response will be processed by automated systems.
        Any text outside the [FIELD]: value format will cause parsing failure.
        Provide ONLY the structured fields requested above.
           
      output_format: |
        1. [THEMATIC OPPOSITION]: Direct conflicts with supporting examples
        2. [COEXISTENCE AREAS]: Complementary areas with explanation
        3. [DOMINANCE PATTERNS]: Dominant themes and contextual variations
        4. [COHERENCY PATTERN]: Selected pattern with detailed justification
        5. [STRATEGIC ASSESSMENT]: Primary strategy with supporting analysis
        6. [SCORE RECONCILIATION]: Final scores with adjustment reasoning
        
        # COMPETITIVE OUTPUT RATIONALE:
        # Structured format ensures systematic capture of strategic analysis.
        # Final scores become primary quantitative outputs for ensemble aggregation.
        # Detailed justifications enable minority report evaluation when LLMs disagree.
        # This stage output provides both qualitative strategic insights and
        # quantitative scores for empirical validation.

    # ================================================================
    # STAGE 4: FRAMEWORK FIT ASSESSMENT
    # ================================================================
    
    stage_4_framework_fit:
      description: "Assessment of populism-pluralism framework appropriateness and final score confidence"
      
      # STAGE 4 DESIGN RATIONALE:
      # Meta-analytical stage evaluates framework appropriateness and score confidence.
      # This implements coordinate-free methodology's adaptive framework selection
      # principle by assessing when the chosen framework provides good analytical fit.
      # Confidence ratings enable epistemic trust by documenting analytical uncertainty
      # and framework limitations. This stage informs ensemble weighting and minority
      # report interpretation.
      
      prompt: |
        🚨 CRITICAL FORMAT REQUIREMENT 🚨
        You MUST respond using ONLY the exact structured format specified below.
        DO NOT include conversational text, explanations, or JSON format.
        Your response will be automatically parsed - format violations will cause system failure.
        
        You are a methodology expert in political discourse analysis frameworks.
        
        Assess how well the populism-pluralism analytical framework captures
        this speech, and provide your final assessment with confidence ratings.
        
        DISCOVERY RESULTS: {discovery_results}
        
        POPULISM ANALYSIS: {populism_results}
        
        PLURALISM ANALYSIS: {pluralism_results}
        
        COMPETITIVE ANALYSIS: {competitive_results}
        
        MANDATORY OUTPUT STRUCTURE - FOLLOW EXACTLY:
        
        [COVERAGE]: XX% - Percentage with explanation of captured vs missed content
        [THEMATIC GAPS]: Specific uncaptured themes with significance assessment
        [RELEVANCE]: Excellent/Good/Fair/Poor - Rating with detailed justification for framework applicability
        [ALIGNMENT]: Strong/Moderate/Weak/No alignment - Alignment level with explanation of discovery-framework fit
        [EXPLANATORY POWER]: High/Medium/Low - Power level with reasoning about pattern explanation
        [ANALYTICAL CONFIDENCE]: High/Medium/Low - Confidence level with rationale for framework appropriateness
        [POPULISM SCORE CONFIDENCE]: High/Medium/Low
        [PLURALISM SCORE CONFIDENCE]: High/Medium/Low
        [CONFIDENCE JUSTIFICATION]: Explain confidence level reasoning
        [RECOMMENDATIONS]: Alternative approaches if applicable
        
        ✅ CORRECT FORMAT EXAMPLE:
        [COVERAGE]: 85% - Framework captures most themes but misses economic policy details
        [RELEVANCE]: Excellent
        [ANALYTICAL CONFIDENCE]: High
        
        ❌ INCORRECT FORMAT (DO NOT DO THIS):
        "I would assess the framework coverage at around 85%..."
        ```json{"coverage": 85}```
        
        🎯 SPECIFIC REQUIREMENTS:
        - Coverage must be percentage: [COVERAGE]: XX%
        - Use exact option values for ratings
        - No explanatory text outside structured fields
        
        ⚠️ FINAL WARNING ⚠️
        Your response will be processed by automated systems.
        Any text outside the [FIELD]: value format will cause parsing failure.
        Provide ONLY the structured fields requested above.
           
      output_format: |
        1. [COVERAGE]: Percentage with explanation of captured vs missed content
        2. [THEMATIC GAPS]: Specific uncaptured themes with significance assessment
        3. [RELEVANCE]: Rating with detailed justification for framework applicability
        4. [ALIGNMENT]: Alignment level with explanation of discovery-framework fit
        5. [EXPLANATORY POWER]: Power level with reasoning about pattern explanation
        6. [ANALYTICAL CONFIDENCE]: Confidence level with rationale for framework appropriateness
        7. [POPULISM SCORE CONFIDENCE]: Confidence levels for populism score
        8. [PLURALISM SCORE CONFIDENCE]: Confidence levels for pluralism score
        9. [CONFIDENCE JUSTIFICATION]: Explain confidence level reasoning
        10. [RECOMMENDATIONS]: Alternative approaches if applicable
        
        # FRAMEWORK FIT OUTPUT RATIONALE:
        # Comprehensive output structure captures all meta-analytical insights for
        # ensemble orchestration. Confidence ratings inform weighting strategies;
        # recommendations guide framework refinement; coverage and gap analysis
        # enables systematic framework evaluation. This implements "thin software"
        # by providing structured meta-data for algorithmic ensemble coordination
        # while preserving "thick LLM" analytical reasoning.

# ================================================================
# VALIDATION REQUIREMENTS
# ================================================================

validation_requirements:
  # VALIDATION REQUIREMENTS RATIONALE:
  # This section specifies what validation data and criteria are needed to
  # assess this analytical methodology, independent of execution strategy.
  
  expert_benchmark:
    source: "Eduardo Tamaki expert populism scores"
    scale: "0.0-1.0 populism intensity"
    corpus_match: "Speeches must match validation corpus exactly"
    comparison_method: "Direct correlation and MAE against expert scores"
    
  success_criteria:
    empirical_validation:
      - "Ensemble populism scores correlate ≥0.70 with Eduardo expert scores"
      - "Mean Absolute Error ≤0.15 vs expert scores"
      - "Score confidence calibration matches actual accuracy"
      
    analytical_quality:
      - "Framework fit assessment predicts score reliability"
      - "Stage progression shows systematic analytical building"
      - "Quantitative scores have detailed qualitative justification"
      
    # SUCCESS CRITERIA RATIONALE:
    # Criteria focus on analytical methodology quality rather than operational
    # execution details. Empirical validation tests accuracy; analytical quality
    # tests methodology sophistication and transparency. These criteria can be
    # applied regardless of which ensemble configuration executes the methodology.

# ================================================================
# EXPECTED OUTPUTS (ANALYTICAL)
# ================================================================

expected_outputs:
  # EXPECTED OUTPUTS RATIONALE:
  # This section specifies what analytical outputs this methodology should produce,
  # independent of operational details like which specific models were used.
  
  stage_progression:
    stage_1: "Discovery themes and rhetorical patterns"
    stage_2: "Independent populism and pluralism assessments with quantitative scores"
    stage_3: "Competitive analysis and score reconciliation"
    stage_4: "Framework fit assessment and confidence ratings"
    
  quantitative_results:
    primary_output: "Final populism score (0.0-1.0) with detailed justification"
    secondary_output: "Pluralism score (0.0-1.0) with relationship analysis"
    confidence_ratings: "Stage-specific confidence levels for ensemble weighting"
    
  qualitative_insights:
    thematic_analysis: "Discovery-based theme identification and evidence"
    strategic_assessment: "Competitive dynamics and rhetorical strategy analysis"
    framework_evaluation: "Coverage assessment and analytical appropriateness"
    
  # OUTPUT RATIONALE:
  # Expected outputs focus on analytical products rather than operational metadata.
  # This enables the same methodology to be evaluated consistently regardless of
  # which ensemble configuration executed it, while ensuring all necessary
  # analytical outputs are captured for validation and interpretation.

# ================================================================
# ORCHESTRATION INTERFACE REQUIREMENTS
# ================================================================

orchestration_interface:
  # ORCHESTRATION INTERFACE RATIONALE:
  # This section specifies what the orchestration system must provide to execute
  # this analytical methodology successfully, creating a clear contract between
  # experiment definition and orchestration implementation.
  
  required_capabilities:
    - "Sequential stage execution with variable substitution"
    - "Multi-prompt stage support (populism_prompt, pluralism_prompt)"
    - "Complete prompt/response logging for audit trail"
    - "Ensemble aggregation with disagreement documentation"
    - "Database storage of all stage results and metadata"
    
  variable_dependencies:
    - "{speech_text}: Primary text input for all stages"
    - "{discovery_results}: Stage 1 → Stage 2 dependency"
    - "{populism_results}, {pluralism_results}: Stage 2 → Stage 3 dependency"
    - "{competitive_results}: Stage 3 → Stage 4 dependency"
    
  ensemble_expectations:
    - "Each LLM executes complete stage sequence independently"
    - "Stage results aggregated with minority report generation"
    - "Confidence ratings used for sophisticated ensemble weighting"
    - "Disagreement documented rather than averaged away"
    
  # INTERFACE RATIONALE:
  # Clear interface specification enables this analytical methodology to be
  # executed by different orchestration systems while ensuring consistent
  # implementation of the coordinate-free methodology and epistemic trust
  # requirements. This separation enables both methodology and orchestration
  # to evolve independently while maintaining compatibility.

# ================================================================
# SEPARATION OF CONCERNS DOCUMENTATION
# ================================================================

separation_of_concerns:
  # SEPARATION RATIONALE:
  # This section documents the clean separation between analytical methodology
  # (this experiment) and execution strategy (orchestration configuration),
  # enabling better architecture and forensic comprehensiveness.
  
  experiment_scope:
    what: "Analytical methodology specification"
    includes:
      - "Stage progression and prompt definitions"
      - "Variable dependencies and output formats"
      - "Validation requirements and success criteria"
      - "Expected analytical outputs and quality measures"
    excludes:
      - "Specific model selection and configuration"
      - "Ensemble aggregation algorithms and thresholds"
      - "Cost management and operational constraints"
      - "Infrastructure and deployment details"
      
  orchestration_scope:
    what: "Execution strategy specification"
    includes:
      - "Model selection (dev vs prod tiers)"
      - "Ensemble coordination and aggregation methods"
      - "Minority report thresholds and escalation rules"
      - "Database configuration and audit trail implementation"
    excludes:
      - "Analytical stage definitions and prompt content"
      - "Variable dependency chains and validation criteria"
      - "Framework fit assessment and confidence calibration"
      - "Research questions and success criteria"
      
  benefits:
    methodology_independence: "Same analytical approach, different execution strategies"
    execution_flexibility: "Same infrastructure, different analytical methodologies"
    forensic_clarity: "Separate evolution tracking for methodology vs operations"
    reproducibility_enhancement: "Complete specification through experiment + orchestration"
    
  # SEPARATION BENEFITS RATIONALE:
  # Clean separation enhances rather than compromises forensic comprehensiveness
  # by making every execution decision explicit and traceable. This enables
  # better A/B testing, methodology evolution, and operational optimization
  # while maintaining complete audit trails for epistemic trust implementation.

# ================================================================
# ASSERTIVE FORMAT ENFORCEMENT SPECIFICATION
# ================================================================

# ASSERTIVE FORMAT RATIONALE:
# LLMs have strong conversational tendencies and will deviate from structured
# formats unless explicitly constrained through assertive prompting. Based on
# extensive prototyping, successful format compliance requires:
# 1. Opening threat/warning about strict format requirements
# 2. Clear visual separation of format specifications  
# 3. Explicit examples of correct vs incorrect responses
# 4. Closing enforcement with consequences for non-compliance
# 5. Multiple redundant format reminders throughout prompts
#
# This specification provides reusable assertive formatting components that
# should be integrated into all stage prompts to ensure reliable automated
# parsing and score extraction.

assertive_format_enforcement:
  
  # Universal format enforcement header for all prompts
  format_opening: |
    🚨 CRITICAL FORMAT REQUIREMENT 🚨
    You MUST respond using ONLY the exact structured format specified below.
    DO NOT include conversational text, explanations, or deviations.
    Your response will be automatically parsed - format violations will cause system failure.
  
  # Structured field enforcement template
  structured_output_template: |
    MANDATORY OUTPUT STRUCTURE - FOLLOW EXACTLY:
    
    [FIELD_NAME]: Required_Value_Type
    [NEXT_FIELD]: Required_Value_Type
    
    ⚠️ USE EXACT BRACKET FORMAT: [FIELD_NAME]: value
    ⚠️ NO additional text outside these structured fields
    ⚠️ NO conversational language or explanations
  
  # Compliance examples (correct vs incorrect)
  compliance_examples: |
    ✅ CORRECT FORMAT EXAMPLE:
    [PRESENCE]: Yes
    [EVIDENCE]: "exact quote from text"
    [SCORE]: 0.75
    
    ❌ INCORRECT FORMAT (DO NOT DO THIS):
    "I would say that this speech shows some populist elements..."
    "Looking at the evidence, I think the score should be around 0.75 because..."
    
  # Closing enforcement warning
  format_closing: |
    ⚠️ FINAL WARNING ⚠️
    Your response will be processed by automated systems.
    Any text outside the [FIELD]: value format will cause parsing failure.
    Provide ONLY the structured fields requested above.

  # Score-specific enforcement (for quantitative fields)
  score_enforcement: |
    🎯 QUANTITATIVE SCORE REQUIREMENTS:
    - MUST be a decimal number between 0.0 and 1.0
    - Use format: [SCORE]: 0.XX (not "about 0.7" or "roughly 75%")
    - NO explanatory text in the score field itself
    - Justification goes in separate [SCORE_JUSTIFICATION] field

# ================================================================
# ASSERTIVE PROMPT TEMPLATES
# ================================================================

# Reusable prompt components that integrate assertive formatting
assertive_prompt_components:
  
  populism_assessment_assertive: |
    {format_opening}
    
    POPULISM ASSESSMENT - EXACT FORMAT REQUIRED:
    
    [PRESENCE]: Yes/No/Unclear
    [SALIENCE]: High/Medium/Low/None
    [EVIDENCE]: "quote 1", "quote 2", "quote 3"
    [INTENSITY]: Strong/Moderate/Weak/None
    [CONSISTENCY]: Consistent/Mixed/Inconsistent
    [CONFIDENCE]: High/Medium/Low
    [SCORE]: 0.XX
    [SCORE_JUSTIFICATION]: Brief explanation
    
    {compliance_examples}
    {score_enforcement}
    {format_closing}
    
  pluralism_assessment_assertive: |
    {format_opening}
    
    PLURALISM ASSESSMENT - EXACT FORMAT REQUIRED:
    
    [PRESENCE]: Yes/No/Unclear
    [SALIENCE]: High/Medium/Low/None
    [EVIDENCE]: "quote 1", "quote 2", "quote 3"
    [INTENSITY]: Strong/Moderate/Weak/None
    [CONSISTENCY]: Consistent/Mixed/Inconsistent
    [CONFIDENCE]: High/Medium/Low
    [SCORE]: 0.XX
    [SCORE_JUSTIFICATION]: Brief explanation
    
    {compliance_examples}
    {score_enforcement}
    {format_closing}

  competitive_analysis_assertive: |
    {format_opening}
    
    COMPETITIVE ANALYSIS - EXACT FORMAT REQUIRED:
    
    [THEMATIC_OPPOSITION]: Description
    [COEXISTENCE_AREAS]: Description
    [DOMINANCE_PATTERNS]: Description
    [COHERENCY_PATTERN]: Selected pattern
    [STRATEGIC_ASSESSMENT]: Description
    [FINAL_POPULISM_SCORE]: 0.XX
    [FINAL_PLURALISM_SCORE]: 0.XX
    [ADJUSTMENT_JUSTIFICATION]: Brief explanation
    
    {score_enforcement}
    {format_closing}

  framework_fit_assertive: |
    {format_opening}
    
    FRAMEWORK FIT ASSESSMENT - EXACT FORMAT REQUIRED:
    
    [COVERAGE]: XX%
    [THEMATIC_GAPS]: Description
    [RELEVANCE]: Excellent/Good/Fair/Poor
    [ALIGNMENT]: Strong/Moderate/Weak/No alignment
    [EXPLANATORY_POWER]: High/Medium/Low
    [ANALYTICAL_CONFIDENCE]: High/Medium/Low
    [POPULISM_SCORE_CONFIDENCE]: High/Medium/Low
    [PLURALISM_SCORE_CONFIDENCE]: High/Medium/Low
    [CONFIDENCE_JUSTIFICATION]: Explain confidence level reasoning
    [RECOMMENDATIONS]: Description if applicable
    
    {format_closing}

# ================================================================
# PARSING VALIDATION REQUIREMENTS
# ================================================================

# Specifications for validating LLM format compliance
parsing_validation:
  
  required_field_patterns:
    - "\\[PRESENCE\\]:\\s*(Yes|No|Unclear)"
    - "\\[SALIENCE\\]:\\s*(High|Medium|Low|None)"
    - "\\[EVIDENCE\\]:\\s*\"[^\"]+\""
    - "\\[SCORE\\]:\\s*[0-1]\\.[0-9]{1,2}"
    
  compliance_checks:
    - "No text before first [FIELD] marker"
    - "No text after last [FIELD] marker"
    - "All required fields present"
    - "All scores are valid decimal numbers"
    - "All categorical fields use specified options"
    
  failure_handling:
    - "Log format violations for model performance tracking"
    - "Attempt automated format repair for minor violations"
    - "Flag responses requiring manual review"
    - "Generate compliance reports for model training"

# ================================================================
# EXPERIMENT DEFINITION
# ================================================================ 